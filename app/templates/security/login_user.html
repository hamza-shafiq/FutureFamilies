{% extends "layout.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% block title %}
Login
{% endblock %}

{% block content %}
{% include "message.html" %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" integrity="sha512-aOG0c6nPNzGk+5zjwyJaoRUgCdOrfSDhmMID2u4+OIslr0GjpLKo7Xm0Ao3xmpM4T8AmIouRkqwj1nrdVsLKEQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<style>
    #container{width:100%;}
    #center{
        margin: auto;
        width: 50%;
        padding: 10px;
    }
    .col-custom {
        border-bottom: 1px solid grey;
        width:100%
    }
    fieldset {
        top: 0;
        border: 1px solid #D6DDB9;
        margin: 16px 12px;
        padding: 8px;
        border-radius: 0;
        background: #ffffff;
        position: relative;
        display: block;
        margin-inline-start: 2px;
        margin-inline-end: 2px;
        padding-block-start: 0.35em;
        padding-inline-start: 0.75em;
        padding-inline-end: 0.75em;
        padding-block-end: 0.625em;
        min-inline-size: min-content;
        font-family: Tahoma,Verdana,Arial,Helvetica,sans-serif;
    }
    .mid-content-block {padding:40px 0;}
    /*.form-control {background-color: white;}*/
</style>
<h4 class=""><b>Welcome!</b></h4>
<hr />
<p>Interested users can register here to send in their ideas for grants and for all other purposes.</p>
<br />
<div id="container">
    <div class="row">
        <div class="col-6 p-2">
            <h4><b>Registered User?</b></h4>
            <hr>
            <form method="POST" action="{{ url_for_security('login') }}" id="loginForm" name="loginForm" class="pb-3">
                {{ login_user_form.hidden_tag() }}
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3">{{ login_user_form.email.label }}</div>
                        <div class="col-9">
                            {{ login_user_form.email(class="form-control restrictedText", size="50", placeholder=login_user_form.email.label.text, title=login_user_form.email.label.text)  }}
                            <small id="error-msg-lg-em" style="color: red"></small>
                        </div>
                        <div class="invalid-feedback"></div>
                    </div>
                  </div>
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3">{{ login_user_form.password.label }}</div>
                        <div class="col-9">
                            {{ login_user_form.password(class="form-control restrictedText", size="50", placeholder=login_user_form.password.label.text, title=login_user_form.password.label.text)  }}
                            <small id="error-msg-lg-ps" style="color: red"></small>
                        </div>
                        <div class="invalid-feedback"></div>
                    </div>
                  </div>
                <div class="row pb-2" style="padding-left: 28%;">
                    {{ login_user_form.submit(class="btn btn-secondary") }}
                </div>
                <div style="margin-left: 25%"><label style="color: darkred">Forget Password? </label><a style="color: blue" href="{{url_for_security('forgot_password')}}">  <u>Click Here</u></a></div>
            </form>

            {% for error in login_user_form.email.errors %}
                <script>
                    let elem = document.querySelector("#email")
                    elem.style.border = "1px solid red";
                    document.getElementById("error-msg-lg-em").innerHTML = "{{error}}";
                </script>
            {% endfor %}
            {% for error in login_user_form.password.errors %}
                <script>
                    let elem = document.querySelector("#password")
                    elem.style.border = "1px solid red";
                    document.getElementById("error-msg-lg-ps").innerHTML = "{{error}}";
                </script>
            {% endfor %}

            <h5><b>Subscribe to our newsletter</b></h5>
            <hr>
            <p><a href="#"><u>CLick here</u></a> to subscribe our newsletter for regular updates on Foundation funding & activities</p>
        </div>

        <div class="col-6 p-2">
            <h4><b>New User?</b></h4>
            <hr>
            <form method="POST" action="{{url_for_security('register')}}" width="100%" id="registerForm"  name="register_user">
                {{ register_user_form.hidden_tag() }}

                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3 pr-0">{{ register_user_form.first_name.label }}</div>
                        <div class="col-9">
                            {{ register_user_form.first_name(class="form-control restrictedText", size="50", placeholder=register_user_form.first_name.label.text, title=register_user_form.first_name.label.text)  }}
                            <small id="error-msg-fn" style="color: red"></small>
                        </div>
                      <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3 pr-0">{{ register_user_form.last_name.label }}</div>
                        <div class="col-9">
                            {{ register_user_form.last_name(class="form-control restrictedText", size="50", placeholder=register_user_form.last_name.label.text, title=register_user_form.last_name.label.text)  }}
                            <small id="error-msg-ln" style="color: red"></small>
                        </div>
                      <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3 pr-0">{{ register_user_form.email.label }}</div>
                        <div class="col-9">
                            {{ register_user_form.email(class="form-control restrictedText", size="50", placeholder=register_user_form.email.label.text, title=register_user_form.email.label.text)  }}
                            <small id="error-msg-em" style="color: red"></small>
                        </div>
                      <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3">{{ register_user_form.password.label }}</div>
                        <div class="col-9">
                            {{ register_user_form.password(class="form-control restrictedText", size="50", placeholder=register_user_form.password.label.text, title=register_user_form.password.label.text)  }}
                            <small id="error-msg-ps" style="color: red"></small>
                        </div>
                      <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3">{{ register_user_form.password_confirm.label }}</div>
                        <div class="col-9">
                            {{ register_user_form.password_confirm(class="form-control restrictedText", size="50", placeholder=register_user_form.password_confirm.label.text, title=register_user_form.password_confirm.label.text)  }}
                            <small id="error-msg-psc" style="color: red"></small>
                        </div>
                      <div class="invalid-feedback"></div>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-xl-20 row required" style="width: 100%">
                        <div class="col-3"></div>
                        <div class="col-9" id="recaptcha-block">
                            {{ register_user_form.recaptcha | safe}}
                            <small id="error-msg-rcp" style="color: red"></small>
                        </div>
                    </div>
                </div>
<!--                <input type="checkbox" value="captcha" id="captcha" hidden/>-->

<!--                <fieldset class="captcha form-wrapper"><legend><span class="fieldset-legend">CAPTCHA</span></legend><div class="fieldset-wrapper"><div class="fieldset-description">This question is to prevent automated spam submissions.<br>  Check the box below and follow the directions.</div><input type="hidden" name="captcha_sid" value="1086541">-->
<!--                <input type="hidden" name="captcha_token" value="a7b50e85a623e0c5206e80a4d1385e63">-->
<!--                <input type="hidden" name="captcha_response" value="Google no captcha">-->
<!--                <div class="g-recaptcha" data-sitekey="6LdJ8xwUAAAAAFa2XnvPye01kp6y9QD88TlXscYf" data-theme="light" data-type="image"><div style="width: 304px; height: 78px;"><div><iframe title="reCAPTCHA" src="https://www.google.com/recaptcha/api2/anchor?ar=1&amp;k=6LdJ8xwUAAAAAFa2XnvPye01kp6y9QD88TlXscYf&amp;co=aHR0cHM6Ly9wb3J0YWwudGVtcGxldG9uLm9yZzo0NDM.&amp;hl=en&amp;type=image&amp;v=_7Co1fh8iT2hcjvquYJ_3zSP&amp;theme=light&amp;size=normal&amp;cb=lps15rcji6e2" width="304" height="78" role="presentation" name="a-glkkdqu3a32e" frameborder="0" scrolling="no" sandbox="allow-forms allow-popups allow-same-origin allow-scripts allow-top-navigation allow-modals allow-popups-to-escape-sandbox"></iframe></div><textarea id="g-recaptcha-response" name="g-recaptcha-response" class="g-recaptcha-response" style="width: 250px; height: 40px; border: 1px solid rgb(193, 193, 193); margin: 10px 25px; padding: 0px; resize: none; display: none;"></textarea></div><iframe style="display: none;"></iframe></div><input type="hidden" name="captcha_cacheable" value="1">-->
<!--                </div></fieldset>-->

<!--                <div style="margin-left: 25%"><input id="term-of-use" type="checkbox"><label class="pl-2">I agree to the </label><a style="color: blue" href="#">  <u>Terms of Use</u></a></div>-->
                <div class="row pb-2" style="padding-left: 28%;">
                    {{ register_user_form.submit(class="btn btn-secondary") }}
                </div>
            </form>

            {% for error in register_user_form.first_name.errors %}
                <script>
                    let elem = document.querySelector("#first_name")
                    elem.style.border = "1px solid red";
                    document.getElementById("error-msg-fn").innerHTML = "{{error}}";
                </script>
            {% endfor %}
            {% for error in register_user_form.last_name.errors %}
                <script>
                    let elem1 = document.querySelector("#last_name")
                    elem1.style.border = "1px solid red";
                    document.getElementById("error-msg-ln").innerHTML = "{{error}}";
                </script>
            {% endfor %}
            {% for error in register_user_form.email.errors %}
                <script>
                    debugger;
                    let elem2 = document.querySelector("#registerForm #email")
                    elem2.style.border = "1px solid red";
                    document.getElementById("error-msg-em").innerHTML = "{{error}}";
                </script>
            {% endfor %}
            {% for error in register_user_form.password.errors %}
                <script>
                    let elem3 = document.querySelector("#password")
                    elem3.style.border = "1px solid red";
                    document.getElementById("error-msg-ps").innerHTML = "{{error}}";
                </script>
            {% endfor %}
            {% for error in register_user_form.password_confirm.errors %}
                <script>
                    let elem4 = document.querySelector("#password_confirm")
                    elem4.style.border = "1px solid red";
                    document.getElementById("error-msg-psc").innerHTML = "{{error}}";
                </script>
            {% endfor %}
            {% for error in register_user_form.recaptcha.errors %}
                <script>
                    // let elem5 = document.querySelector("#recaptcha-block")
                    // elem5.style.border = "1px solid red";
                    document.getElementById("error-msg-rcp").innerHTML = "{{error}}";
                </script>
            {% endfor %}
        </div>
    </div>
</div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
{% endblock %}